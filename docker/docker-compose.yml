version: "3"

services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    ports:
      - "53:53/tcp"
      - "53:53/udp"
      - "67:67/udp"
      - "80:80/tcp"
      - "443:443/tcp"
    environment:
      TZ: 'Asia/Manila'
      WEBPASSWORD: '${WEBPASSWORD}'
      DNS1: '1.1.1.1'
      DNS2: '1.0.0.1'
      DNSSEC: 'true'
      ADLISTS: |
        https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
        https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt
        https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hosts
        https://v.firebog.net/hosts/static/w3kbl.txt
        https://adaway.org/hosts.txt
        https://v.firebog.net/hosts/AdguardDNS.txt
        https://v.firebog.net/hosts/Admiral.txt
        https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt
        https://v.firebog.net/hosts/Easylist.txt
        https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&showintro=0&mimetype=plaintext
        https://raw.githubusercontent.com/FadeMind/hosts.extras/master/UncheckyAds/hosts
        https://raw.githubusercontent.com/bigdargon/hostsVN/master/hosts
        https://v.firebog.net/hosts/Easyprivacy.txt
        https://v.firebog.net/hosts/Prigent-Ads.txt
        https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.2o7Net/hosts
        https://raw.githubusercontent.com/crazy-max/WindowsSpyBlocker/master/data/hosts/spy.txt
        https://hostfiles.frogeye.fr/firstparty-trackers-hosts.txt
        https://raw.githubusercontent.com/DandelionSprout/adfilt/master/Alternate%20versions%20Anti-Malware%20List/AntiMalwareHosts.txt
        https://osint.digitalside.it/Threat-Intel/lists/latestdomains.txt
        https://v.firebog.net/hosts/Prigent-Crypto.txt
        https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Risk/hosts
        https://bitbucket.org/ethanr/dns-blacklists/raw/8575c9f96e5b4a1308f2f12394abd86d0927a4a0/bad_lists/Mandiant_APT1_Report_Appendix_D.txt
        https://phishing.army/download/phishing_army_blocklist_extended.txt
        https://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-malware.txt
        https://v.firebog.net/hosts/RPiList-Malware.txt
        https://v.firebog.net/hosts/RPiList-Phishing.txt
        https://raw.githubusercontent.com/Spam404/lists/master/main-blacklist.txt
        https://raw.githubusercontent.com/AssoEchap/stalkerware-indicators/master/generated/hosts
        https://urlhaus.abuse.ch/downloads/hostfile/
        https://zerodot1.gitlab.io/CoinBlockerLists/hosts_browser
      WHITELIST: |
        clients4.google.com
        clients2.google.com
        s.youtube.com
        video-stats.l.google.com
        www.googleapis.com
        youtubei.googleapis.com
        oauthaccountmanager.googleapis.com
        android.clients.google.com
        reminders-pa.googleapis.com
        firestore.googleapis.com
        gstaticadssl.l.google.com
        googleapis.l.google.com
        dl.google.com
        redirector.gvt1.com
        www.msftncsi.com
        www.msftconnecttest.com
        outlook.office365.com
        products.office.com
        c.s-microsoft.com
        i.s-microsoft.com
        login.live.com
        login.microsoftonline.com
        g.live.com
        dl.delivery.mp.microsoft.com
        geo-prod.do.dsp.mp.microsoft.com
        displaycatalog.mp.microsoft.com
        msedge.api.cdp.microsoft.com
        clientconfig.passport.net
        v10.events.data.microsoft.com
        v20.events.data.microsoft.com
        client-s.gateway.messenger.live.com
        xbox.ipv6.microsoft.com
        device.auth.xboxlive.com
        title.mgt.xboxlive.com
        xsts.auth.xboxlive.com
        title.auth.xboxlive.com
        ctldl.windowsupdate.com
        attestation.xboxlive.com
        xboxexperiencesprod.experimentation.xboxlive.com
        xflight.xboxlive.com
        cert.mgt.xboxlive.com
        xkms.xboxlive.com
        def-vef.xboxlive.com
        notify.xboxlive.com
        help.ui.xboxlive.com
        licensing.xboxlive.com
        eds.xboxlive.com
        www.xboxlive.com
        v10.vortex-win.data.microsoft.com
        settings-win.data.microsoft.com
        officeclient.microsoft.com
        appleid.apple.com
        gsp-ssl.ls.apple.com
        gsp-ssl.ls-apple.com.akadns.net
        connectivitycheck.android.com
        clients3.google.com
        connectivitycheck.gstatic.com
        msftncsi.com
        ipv6.msftncsi.com
        captive.apple.com
        gsp1.apple.com
        www.apple.com
        www.appleiphonecell.com
        spclient.wg.spotify.com
        apresolve.spotify.com
        api-tv.spotify.com
        upload.facebook.com
        creative.ak.fbcdn.net
        external-lhr0-1.xx.fbcdn.net
        external-lhr1-1.xx.fbcdn.net
        external-lhr10-1.xx.fbcdn.net
        external-lhr2-1.xx.fbcdn.net
        external-lhr3-1.xx.fbcdn.net
        external-lhr4-1.xx.fbcdn.net
        external-lhr5-1.xx.fbcdn.net
        external-lhr6-1.xx.fbcdn.net
        external-lhr7-1.xx.fbcdn.net
        external-lhr8-1.xx.fbcdn.net
        external-lhr9-1.xx.fbcdn.net
        fbcdn-creative-a.akamaihd.net
        scontent-lhr3-1.xx.fbcdn.net
        scontent.xx.fbcdn.net
        scontent.fgdl5-1.fna.fbcdn.net
        graph.facebook.com
        b-graph.facebook.com
        connect.facebook.com
        cdn.fbsbx.com
        api.facebook.com
        edge-mqtt.facebook.com
        mqtt.c10r.facebook.com
        portal.fb.com
        star.c10r.facebook.com
        star-mini.c10r.facebook.com
        b-api.facebook.com
        fb.me
        bigzipfiles.facebook.com
        l.facebook.com
        www.facebook.com
        scontent-atl3-1.xx.fbcdn.net
        static.xx.fbcdn.net
        edge-chat.messenger.com
        video.xx.fbcdn.net
        external-ort2-1.xx.fbcdn.net
        scontent-ort2-1.xx.fbcdn.net
        edge-chat.facebook.com
        scontent-mia3-1.xx.fbcdn.net
        web.facebook.com
        rupload.facebook.com
        l.messenger.com
        plex.tv
        tvdb2.plex.tv
        pubsub.plex.bz
        proxy.plex.bz
        proxy02.pop.ord.plex.bz
        cpms.spop10.ams.plex.bz
        meta-db-worker02.pop.ric.plex.bz
        meta.plex.bz
        tvthemes.plexapp.com.cdn.cloudflare.net
        tvthemes.plexapp.com
        106c06cd218b007d-b1e8a1331f68446599e96a4b46a050f5.ams.plex.services
        meta.plex.tv
        cpms35.spop10.ams.plex.bz
        proxy.plex.tv
        metrics.plex.tv
        pubsub.plex.tv
        status.plex.tv
        www.plex.tv
        node.plexapp.com
        nine.plugins.plexapp.com
        staging.plex.tv
        app.plex.tv
        o1.email.plex.tv
        o2.sg0.plex.tv
        dashboard.plex.tv
        gravatar.com
        thetvdb.com
        themoviedb.com
        chtbl.com
        services.sonarr.tv
        skyhook.sonarr.tv
        download.sonarr.tv
        apt.sonarr.tv
        forums.sonarr.tv
        placehold.it
        placeholdit.imgix.net
        dl.dropboxusercontent.com
        ns1.dropbox.com
        ns2.dropbox.com
        s.marketwatch.com
        imagesak.secureserver.net
        gfwsl.geforce.com
        tracking-protection.cdn.mozilla.net
        telemetry-console.api.playstation.com
        styles.redditmedia.com
        www.redditstatic.com
        reddit.map.fastly.net
        www.redditmedia.com
        reddit-uploaded-media.s3-accelerate.amazonaws.com
        wa.me
        www.wa.me
        ud-chat.signal.org
        chat.signal.org
        storage.signal.org
        signal.org
        www.signal.org
        updates2.signal.org
        textsecure-service-whispersystems.org
        giphy-proxy-production.whispersystems.org
        cdn.signal.org
        whispersystems-textsecure-attachments.s3-accelerate.amazonaws.com
        d83eunklitikj.cloudfront.net
        souqcdn.com
        cms.souqcdn.com
        api.directory.signal.org
        contentproxy.signal.org
        turn1.whispersystems.org
        twitter.com
        upload.twitter.com
        api.twitter.com
        mobile.twitter.com
    volumes:
      - './etc-pihole:/etc/pihole'
      - './etc-dnsmasq.d:/etc/dnsmasq.d'
    cap_add:
      - NET_ADMIN
    restart: unless-stopped
